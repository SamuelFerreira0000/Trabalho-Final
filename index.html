<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <title>PROZ - Treinamento de Seguran√ßa</title>
    
    
    <script src="https://cdn.tailwindcss.com"></script>    
    <script src="https://unpkg.com/lucide@latest"></script>
    <link rel="stylesheet" href="style.css">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&family=Playfair+Display:wght@700&display=swap');
    </style>


</head>
<body class="bg-slate-900 text-white min-h-screen">
    
   
    <div id="app" class="fade-in"></div>    
    <script>
        // --- BANCO DE DADOS (QUEST√ïES) ---
        const questionPool = [
            { id: 1, text: "O que √© Phishing?", options: ["Um v√≠rus de computador", "Uma t√©cnica de engenharia social para roubar dados", "Um software de backup", "Um tipo de firewall"], correct: 1 },
            
            { id: 2, text: "Qual a melhor pr√°tica para senhas?", options: ["Usar a data de nascimento", "Usar '123456'", "Usar frases longas com caracteres especiais e n√∫meros", "Anotar a senha no monitor"], correct: 2 },
            
            { id: 3, text: "O que a LGPD protege?", options: ["Apenas dados de empresas", "Dados pessoais de indiv√≠duos", "Direitos autorais de m√∫sicas", "Patentes industriais"], correct: 1 },
            
            { id: 4, text: "O que √© um Plano de Conting√™ncia?", options: ["Um plano para festas da empresa", "Estrat√©gia para recuperar opera√ß√µes ap√≥s um desastre", "Lista de senhas dos funcion√°rios", "Manual de vendas"], correct: 1 },
            
            { id: 5, text: "O que √© Ransomware?", options: ["Software que sequestra dados e pede resgate", "Um antiv√≠rus gratuito", "Uma pe√ßa de hardware", "Um site de compras"], correct: 0 },
            
            { id: 6, text: "Qual o objetivo da Autentica√ß√£o de Dois Fatores (2FA)?", options: ["Deixar o login mais lento", "Adicionar uma camada extra de seguran√ßa al√©m da senha", "Evitar que o usu√°rio esque√ßa a senha", "Eliminar o uso de senhas"], correct: 1 },
            
            { id: 7, text: "O que √© Engenharia Social?", options: ["Constru√ß√£o de pr√©dios seguros", "Manipula√ß√£o psicol√≥gica para obter informa√ß√µes confidenciais", "Rede social para engenheiros", "Curso de gradua√ß√£o"], correct: 1 },
            
            { id: 8, text: "Qual destes √© um dado sens√≠vel segundo a LGPD?", options: ["Nome completo", "Email comercial", "Dados sobre sa√∫de ou biometria", "Cargo na empresa"], correct: 2 },
            
            { id: 9, text: "Qual √© o objetivo principal de uma Pol√≠tica de Seguran√ßa da Informa√ß√£o (PSI)?", options: ["Permitir o compartilhamento irrestrito de informa√ß√µes entre os funcion√°rios.", "Estabelecer regras e diretrizes para proteger as informa√ß√µes e os recursos da empresa contra amea√ßas de seguran√ßa.", "Aumentar a complexidade dos procedimentos internos da empresa.", "Evitar que qualquer pessoa acesse os sistemas da empresa."], correct: 1 },

            { id: 10, text: "Onde n√£o devemos armazenar backups cr√≠ticos?", options: ["Na nuvem segura", "Em um servidor externo", "No mesmo disco r√≠gido dos dados originais", "Em fitas magn√©ticas"], correct: 2 },

            { id: 11, text: "O que significa a sigla VPN?", options: ["Virtual Private Network", "Very Personal Number", "Virtual Public Network", "Virus Protection Name"], correct: 0 },

            { id: 12, text: "Qual a atitude correta ao receber um e-mail suspeito?", options: ["Clicar no link para verificar", "Responder xingando", "Reportar √† equipe de seguran√ßa e n√£o clicar", "Encaminhar para todos os amigos"], correct: 2 },

            { id: 13, text: "O que garante a 'Disponibilidade' na seguran√ßa da informa√ß√£o?", options: ["Que os dados sejam secretos", "Que os dados n√£o sejam alterados", "Que os dados estejam acess√≠veis quando necess√°rios", "Que os dados sejam apagados"], correct: 2 },

            { id: 14, text: "Qual a fun√ß√£o de um Firewall?", options: ["Acelerar a internet", "Monitorar e controlar o tr√°fego de rede", "Limpar o teclado", "Criar senhas"], correct: 1 },

            { id: 15, text: "Por que n√£o devemos usar a mesma senha em tudo?", options: ["Pregui√ßa", "Se um servi√ßo vazar, todas as contas s√£o comprometidas", "Os sistemas n√£o aceitam", "√â mais dif√≠cil de decorar"], correct: 1 },

            { id: 16, text: "Qual √© o principal objetivo da Seguran√ßa da Informa√ß√£o (SI)?", options: ["Apenas garantir o uptime de servidores.", "Garantir a Confidencialidade, Integridade e Disponibilidade das informa√ß√µes.", "Proteger dados em papel, excluindo meios digitais", "Aplicar a LGPD em todas as empresas."], correct: 1 },

            { id: 17, text: "O que diferencia Dados de Informa√ß√£o no contexto da S.I.?", options: ["Dados t√™m significado, Informa√ß√£o s√£o fatos brutos.", "Dados s√£o digitais, Informa√ß√£o √© f√≠sica.", "Dados s√£o elementos brutos, enquanto a Informa√ß√£o √© o resultado do processamento dos dados, com significado e contexto.", "N√£o h√° diferen√ßa, s√£o sin√¥nimos."], correct: 2 },

            { id: 18, text: "Um ataque de Ransomware que criptografa os arquivos de uma empresa e os torna inacess√≠veis afeta diretamente qual dos pilares da S.I.?", options: ["Disponibilidade", "Confidencialidade", "Autenticidade", "Integridade"], correct: 0 },

            { id: 19, text: "A Seguran√ßa Cibern√©tica (Cyber Security) √© uma faceta da Seguran√ßa da Informa√ß√£o que foca a prote√ß√£o de dados e informa√ß√µes exclusivamente em: ", options: ["Centros de Dados (Data Centers) privados.", "Meios f√≠sicos e papel.", "Apenas redes de computadores sem acesso √† internet.", "Meios digitais e ambientes informatizados."], correct: 3 },

            { id: 20, text: "Na fase de Defini√ß√£o de Medidas Preventivas, qual das op√ß√µes abaixo √© um exemplo pr√°tico que um desenvolvedor pode ajudar a implementar para evitar incidentes?", options: ["Implementa√ß√£o de firewalls e sistemas de criptografia.", "Uso de backups (Esta √© uma medida do Plano Alternativo).", "Desligamento total dos servidores ap√≥s um ataque.", "Teste de penetra√ß√£o (PenTest) ap√≥s o ataque."], correct: 0 },

            { id: 21, text: "Qual √© o objetivo principal de um Plano de Conting√™ncia na Seguran√ßa da Informa√ß√£o?", options: ["Minimizar os danos e restabelecer a normalidade ap√≥s um incidente.", "Aumentar o custo operacional da seguran√ßa da informa√ß√£o.", "Evitar por completo qualquer incidente de seguran√ßa.", "Garantir que apenas softwares open source sejam utilizados."], correct: 0 },

            { id: 22, text: "De acordo com o passo a passo para a elabora√ß√£o de um Plano de Conting√™ncia, qual √© a primeira etapa a ser realizada?", options: ["Atualizar o plano regularmente.", "Identificar os riscos.", "Treinar a equipe.", "Desenvolver o plano alternativo."], correct: 1 },

            { id: 23, text: "Qual √© a melhor defini√ß√£o para Vulnerabilidade no contexto da Seguran√ßa da Informa√ß√£o? ", options: ["Um evento que pode afetar negativamente um ativo, como um ataque de phishing.", "Uma falha, fraqueza ou ponto fraco em um sistema que pode ser explorado por uma amea√ßa.", "A informa√ß√£o ou recurso de valor que se deseja proteger.", "A possibilidade de uma perda ou dano ocorrer."], correct: 1 },

            { id: 24, text: "Em um Teste de Penetra√ß√£o (PenTest), o tipo Black Box √© caracterizado por:", options: ["Apenas os analistas internos da organiza√ß√£o realizarem o teste.", "O ataque partir do princ√≠pio de que o agente externo n√£o tem conhecimento da estrutura da organiza√ß√£o, atacando (√†s cegas).", "O testador ter conhecimento parcial do sistema, como credenciais de um usu√°rio comum.", "O testador ter acesso a todas as informa√ß√µes, c√≥digo-fonte e infraestrutura do sistema."], correct: 1 },

                   
            
            
            
            
            
            //{ id: 16, text: "", options: ["", "", "", ""], correct: 2 },

            

        ];

        
        const AppState = {
            screen: 'bemvindo',
            user: { name: '', email: '' },
            progress: { m1: false, m2: false, m3: false },
            xp: 0,
            level: 1,
            quiz: {
                questions: [],
                current: 0,
                score: 0,
                answers: {} // { indiceQuestao: indiceOpcaoEscolhida }
            },
            showFeedback: false
        };

        

        function updateLevel() {
            if (AppState.xp >= 300) AppState.level = 3;
            else if (AppState.xp >= 150) AppState.level = 2;
            else AppState.level = 1;
        }

        function handleStart(event) {
            event.preventDefault();
            const nameInput = document.getElementById('inputName').value;
            const emailInput = document.getElementById('inputEmail').value;

            if (nameInput && emailInput) {
                AppState.user.name = nameInput;
                AppState.user.email = emailInput;
                navigateTo('dashboard');
            }
        }

        function completeModule(moduleId) {
            if (!AppState.progress[moduleId]) {
                AppState.progress[moduleId] = true;
                AppState.xp += 100;
                updateLevel();
                AppState.showFeedback = true;
                setTimeout(() => {
                    AppState.showFeedback = false;
                    render(); // Re-render para remover o feedback
                }, 3000);
            }
            navigateTo('dashboard');
        }

        function startQuiz() {
            // Embaralha e pega 10 quest√µes
            const shuffled = [...questionPool].sort(() => 0.5 - Math.random());
            AppState.quiz.questions = shuffled.slice(0, 10);
            AppState.quiz.current = 0;
            AppState.quiz.score = 0;
            AppState.quiz.answers = {};
            navigateTo('quiz');
        }

        function handleAnswer(optionIndex) {
            const currentQIndex = AppState.quiz.current;
            const currentQ = AppState.quiz.questions[currentQIndex];
            
            // Evita responder duas vezes a mesma
            if (AppState.quiz.answers[currentQIndex] !== undefined) return;

            // Salva resposta
            AppState.quiz.answers[currentQIndex] = optionIndex;

            if (optionIndex === currentQ.correct) {
                AppState.quiz.score++;
            }

            render(); // Atualiza UI para mostrar sele√ß√£o

            setTimeout(() => {
                if (AppState.quiz.current < 9) {
                    AppState.quiz.current++;
                    render();
                } else {
                    navigateTo('result');
                }
            }, 800);
        }

        function navigateTo(screenName) {
            AppState.screen = screenName;
            render();
            window.scrollTo(0,0);
        }

        // --- RENDERIZA√á√ÉO DE HTML (VIEWS) ---

        // View: Login / Tela Inicial
        function renderWelcome() {
            return `
            <div class="min-h-screen flex items-center justify-center p-4">
                
                <div class="max-w-md w-full bg-slate-800 rounded-2xl shadow-2xl overflow-hidden border border-slate-700">
                    
                    <div class="bg-gradient-to-r from-green-600 to-green-400 p-8 text-center">
                        
                        <img src="./logosemfundo.png" class="mx-auto mb-4" style="width:200px; height:auto;">

                        <h1 class="text-3xl font-bold">Cyber School Prime</h1>
                        <p class="text-blue-100 mt-2">PROZ - Treinamento de Seguran√ßa</p>
                    </div>
                    <div class="p-8">
                        <form onsubmit="handleStart(event)" class="space-y-6">
                            <div>
                                <label class="block text-sm font-medium text-slate-400 mb-1">Nome Completo</label>
                                <input id="inputName" required type="text" class="w-full px-4 py-3 bg-slate-700 border border-slate-600 rounded-lg focus:ring-2 focus:ring-blue-500 outline-none text-white placeholder-slate-400" placeholder="Seu nome para o certificado">
                            </div>
                            <div>
                                <label class="block text-sm font-medium text-slate-400 mb-1">E-mail</label>
                                <input id="inputEmail" required type="email" class="w-full px-4 py-3 bg-slate-700 border border-slate-600 rounded-lg focus:ring-2 focus:ring-blue-500 outline-none text-white text-white placeholder-slate-400" placeholder="Digite seu E-mail">
                            </div>
                            <button type="submit" class="w-full bg-green-600 hover:bg-blue-500 text-white font-bold py-3 px-4 rounded-lg transition-all flex items-center justify-center gap-2 shadow-lg">
                                Iniciar Aula <i data-lucide="chevron-right"></i>
                            </button>
                        </form>
                    </div>
                </div>
            </div>`;
        }

        // Componente: Header
        function renderHeader() {
            const completedCount = Object.values(AppState.progress).filter(Boolean).length;
            const progressPerc = (completedCount / 3) * 100;
            const firstName = AppState.user.name.split(' ')[0];

            return `
            <div class="bg-slate-800 border-b border-slate-700 p-4 flex justify-between items-center sticky top-0 z-50 shadow-md">
                <div class="flex items-center gap-3">
                    <div class="from-slate-900 to-slate-700 p-2 rounded-lg"><img src="./logosemfundo.png" class="mx-auto mb-4" style="width:100px; height:auto;"></div>
                    <div>
                         

                        <h2 class="font-bold text-white leading-tight">Aluno ${firstName}</h2>
                        <div class="flex items-center gap-2 text-xs text-blue-400">
                            <span class="bg-slate-700 px-2 py-0.5 rounded">N√≠vel ${AppState.level}</span>
                            <span>${AppState.xp} XP</span>
                        </div>
                    </div>
                </div>
                <div class="flex items-center gap-4">
                    <div class="text-right hidden sm:block">
                        <p class="text-xs text-slate-400">Progresso da Trilha</p>
                        <div class="w-32 h-2 bg-slate-700 rounded-full mt-1 overflow-hidden">
                            <div class="h-full bg-green-500 transition-all duration-500" style="width: ${progressPerc}%"></div>
                        </div>
                    </div>
                </div>
            </div>`;
        }

        // View: Dashboard
        function renderDashboard() {
            const p = AppState.progress;
            const allDone = p.m1 && p.m2 && p.m3;
            
            const feedbackHtml = AppState.showFeedback ? `
                <div class="fixed top-20 right-4 bg-green-600 text-white p-4 rounded-lg shadow-xl animate-bounce flex items-center gap-2 z-50">
                    <i data-lucide="check-circle"></i> M√≥dulo Conclu√≠do! +100 XP
                </div>` : '';

            // Card Helper
            const renderCard = (id, title, desc, color, icon, isDone) => {
                const borderColor = isDone ? 'border-green-500 shadow-green-900/20' : 'border-slate-700 hover:border-blue-500';
                const btnClass = isDone ? 'bg-slate-700 text-slate-300' : `bg-${color}-600 hover:bg-${color}-500 text-white`;
                const btnText = isDone ? 'Revisar M√≥dulo' : 'Iniciar M√≥dulo';
                
                return `
                <div class="bg-slate-800 rounded-xl p-6 border-2 transition-all hover:scale-105 ${borderColor}">
                    <div class="flex justify-between items-start mb-4">
                        <div class="bg-${color}-900/50 p-3 rounded-lg text-${color}-400">
                            <i data-lucide="${icon}" width="32" height="32"></i>
                        </div>
                        ${isDone ? '<i data-lucide="check-circle" class="text-green-500"></i>' : ''}
                    </div>
                    <h3 class="text-xl font-bold mb-2">${title}</h3>
                    <p class="text-slate-400 text-sm mb-4">${desc}</p>
                    <button onclick="navigateTo('${id}')" class="w-full py-2 rounded-lg font-medium transition-colors ${btnClass}">
                        ${btnText}
                    </button>
                </div>`;
            };

            return `
            ${renderHeader()}
            ${feedbackHtml}
            <main class="p-6 max-w-4xl mx-auto">
                <h2 class="text-2xl font-bold mb-6 flex items-center gap-2">
                    <i data-lucide="terminal" class="text-blue-500"</i> Painel de M√≥dulos
                </h2>
                <div class="grid gap-6 md:grid-cols-2 lg:grid-cols-3">
                    ${renderCard('module1', '1. Muralha Digital', 'Senhas fortes, MFA e identifica√ß√£o de Phishing.', 'purple', 'lock', p.m1)}
                    ${renderCard('module2', '2. Guardi√£o de Dados', 'LGPD, classifica√ß√£o de dados e mesa limpa.', 'orange', 'file-text', p.m2)}
                    ${renderCard('module3', '3. Protocolo F√™nix', 'Planos de conting√™ncia, backup e ransomware.', 'blue', 'server', p.m3)}
                </div>
                
                <div class="mt-12 p-8 bg-gradient-to-r from-slate-800 to-slate-800 rounded-2xl border border-slate-700 relative overflow-hidden">
                    <div class="absolute top-0 right-0 p-8 opacity-10"><i data-lucide="award" width="150" height="150"></i></div>
                    <div class="relative z-10">
                        <h3 class="text-2xl font-bold text-white mb-2">Desafio Final: Certifica√ß√£o</h3>
                        <p class="text-slate-300 mb-6 max-w-xl">Complete todos os m√≥dulos para desbloquear o exame final. Voc√™ precisa de 70% de acerto em 10 quest√µes aleat√≥rias para conclus√£o.</p>
                        ${allDone ? 
                            `<button onclick="startQuiz()" class="bg-green-600 hover:bg-green-500 text-white text-lg font-bold py-3 px-8 rounded-lg shadow-lg flex items-center gap-2 animate-pulse">
                                <i data-lucide="play"></i> INICIAR EXAME FINAL
                             </button>` : 
                            `<button disabled class="bg-slate-700 text-slate-500 cursor-not-allowed py-3 px-8 rounded-lg font-bold flex items-center gap-2">
                                <i data-lucide="lock"></i> BLOQUEADO - COMPLETE OS M√ìDULOS
                             </button>`
                        }
                    </div>
                </div>
            </main>`;
        }

        // View: M√≥dulos (Template gen√©rico)
        function renderModule(id, title, icon, color, contentHtml) {
            return `
            <div class="pb-20">
                <div class="p-8 bg-${color}-700 text-white">
                    <button onclick="navigateTo('dashboard')" class="mb-4 text-white/80 hover:text-white flex items-center gap-1">‚Üê Voltar ao Painel</button>
                    <div class="flex items-center gap-4">
                        <i data-lucide="${icon}" width="48" height="48" class="opacity-90"></i>
                        <h1 class="text-3xl font-bold">${title}</h1>
                    </div>
                </div>
                <div class="max-w-3xl mx-auto mt-8 px-6 space-y-8">
                    ${contentHtml}
                    <div class="pt-8 border-t border-slate-700">
                        <button onclick="completeModule('${id}')" class="w-full bg-green-600 hover:bg-green-500 text-white font-bold py-4 rounded-xl shadow-lg transition-transform hover:-translate-y-1 flex items-center justify-center gap-2">
                            <i data-lucide="check-circle"></i> CONCLUIR M√ìDULO
                        </button>
                    </div>
                </div>
            </div>`;
        }

        // Conte√∫do dos M√≥dulos
        const module1Content = `
            <section class="bg-slate-800 p-6 rounded-xl border border-slate-700">
                <h3 class="text-xl font-bold text-purple-400 mb-3">üõ°Ô∏è A For√ßa das Senhas</h3>
                <p class="mb-4 text-slate-300">Senhas s√£o a primeira linha de defesa. Senhas fracas como "123456" s√£o quebradas em segundos.</p>
                <ul class="list-disc ml-5 space-y-2 text-slate-300">
                    <li>Use no m√≠nimo 12 caracteres e misture letras, n√∫meros e s√≠mbolos.</li>
                    <li><strong>Nunca</strong> reutilize senhas em sites diferentes.</li>
                </ul>
            </section>
            <section class="bg-slate-800 p-6 rounded-xl border border-slate-700">
                <h3 class="text-xl font-bold text-purple-400 mb-3">üé£ Identificando Phishing</h3>
                <p class="mb-4 text-slate-300">Phishing √© a arte de enganar. Cuidado com e-mails fingindo ser bancos ou chefes.</p>
                <div class="bg-red-900/30 border border-red-500/50 p-4 rounded-lg mb-4">
                    <p class="font-bold text-red-400">Sinais de Alerta:</p>
                    <ul class="text-sm mt-2 space-y-1 text-slate-300">
                        <li>- Senso de urg√™ncia ("Sua conta ser√° bloqueada AGORA!")</li>
                        <li>- Remetente suspeito ou erros de portugu√™s.</li>
                    </ul>
                </div>
            </section>`;

        const module2Content = `
            <section class="bg-slate-800 p-6 rounded-xl border border-slate-700">
                <h3 class="text-xl font-bold text-orange-400 mb-3">üìú LGPD e Privacidade</h3>
                <p class="mb-4 text-slate-300">Dados pessoais (nome, CPF, e-mail) devem ser tratados com cuidado extremo.</p>
                <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                    <div class="bg-slate-700 p-4 rounded-lg"><strong class="text-white">Dados Pessoais</strong><br><span class="text-sm text-slate-300">Nome, RG, CPF, E-mail.</span></div>
                    <div class="bg-slate-700 p-4 rounded-lg border border-orange-500/30"><strong class="text-orange-300">Dados Sens√≠veis</strong><br><span class="text-sm text-slate-300">Sa√∫de, biometria, religi√£o.</span></div>
                </div>
            </section>
            <section class="bg-slate-800 p-6 rounded-xl border border-slate-700">
                <h3 class="text-xl font-bold text-orange-400 mb-3">üßπ Pol√≠tica de Mesa Limpa</h3>
                <ul class="list-disc ml-5 space-y-2 text-slate-300">
                    <li>Bloqueie o computador (Windows + L) ao levantar.</li>
                    <li>N√£o escreva senhas em post-its.</li>
                    <li>Triture documentos sens√≠veis.</li>
                </ul>
            </section>`;

        const module3Content = `
            <section class="bg-slate-800 p-6 rounded-xl border border-slate-700">
                <h3 class="text-xl font-bold text-blue-400 mb-3">ü¶† Ransomware</h3>
                <p class="mb-4 text-slate-300">Malware que criptografa arquivos e exige resgate. A melhor defesa √© o Backup.</p>
            </section>
            <section class="bg-slate-800 p-6 rounded-xl border border-slate-700">
                <h3 class="text-xl font-bold text-blue-400 mb-3">üíæ Backup 3-2-1</h3>
                <div class="space-y-3">
                    <div class="flex items-center gap-3"><i data-lucide="refresh-ccw" class="text-green-400"></i> <span class="text-slate-300">3 c√≥pias, 2 m√≠dias, 1 na nuvem.</span></div>
                    <div class="flex items-center gap-3"><i data-lucide="eye" class="text-yellow-400"></i> <span class="text-slate-300">Teste seus backups regularmente.</span></div>
                </div>
            </section>`;

        
        function renderQuiz() {
            const qIndex = AppState.quiz.current;
            const question = AppState.quiz.questions[qIndex];
            const progressPerc = (qIndex / 10) * 100;

            const optionsHtml = question.options.map((opt, idx) => {
                const isAnswered = AppState.quiz.answers[qIndex] !== undefined;
                const isSelected = AppState.quiz.answers[qIndex] === idx;
                const isCorrect = idx === question.correct;
                
                let btnClass = "bg-slate-700 hover:bg-slate-600 border-slate-600";
                let iconHtml = "";

                if (isSelected) {
                    btnClass = isCorrect ? "bg-green-600 border-green-500" : "bg-red-600 border-red-500";
                    iconHtml = isCorrect ? '<i data-lucide="check-circle"></i>' : '<i data-lucide="alert-triangle"></i>';
                }

                return `
                <button ${isAnswered ? 'disabled' : ''} onclick="handleAnswer(${idx})" 
                    class="w-full text-left p-4 rounded-xl border-2 transition-all font-medium flex justify-between items-center mb-3 ${btnClass}">
                    <span>${opt}</span>
                    ${iconHtml}
                </button>`;
            }).join('');

            return `
            <div class="min-h-screen flex flex-col items-center justify-center p-4">
                <div class="w-full max-w-2xl bg-slate-800 rounded-2xl shadow-2xl overflow-hidden border border-slate-700">
                    <div class="bg-slate-700 px-6 py-4 flex justify-between items-center">
                        <span class="font-bold text-slate-300">Quest√£o ${qIndex + 1}/10</span>
                        <span class="text-sm bg-blue-900 text-blue-300 px-3 py-1 rounded-full">Avalia√ß√£o Final</span>
                    </div>
                    <div class="h-1 bg-slate-600 w-full">
                        <div class="h-full bg-blue-500 transition-all duration-300" style="width: ${progressPerc}%"></div>
                    </div>
                    <div class="p-8">
                        <h2 class="text-2xl font-bold mb-8">${question.text}</h2>
                        <div class="space-y-3">${optionsHtml}</div>
                    </div>
                </div>
            </div>`;
        }

        
        function renderResult() {
            const score = AppState.quiz.score;
            const perc = (score / 10) * 100;
            const passed = perc >= 70;
            const color = passed ? 'green' : 'red';
            const icon = passed ? 'award' : 'alert-triangle';
            const title = passed ? 'Parab√©ns!' : 'N√£o foi dessa vez';
            const msg = passed ? 'Voc√™ foi aprovado no treinamento.' : 'Voc√™ precisa de 70% para passar.';

            return `
            <div class="min-h-screen flex items-center justify-center p-4">
                <div class="max-w-md w-full bg-slate-800 rounded-2xl shadow-2xl p-8 text-center border border-slate-700">
                    <div class="mb-6">
                        <div class="w-24 h-24 bg-${color}-500 rounded-full flex items-center justify-center mx-auto mb-4 ${passed ? 'animate-bounce' : ''}">
                            <i data-lucide="${icon}" width="48" height="48" class="text-white"></i>
                        </div>
                        <h2 class="text-3xl font-bold text-white mb-2">${title}</h2>
                        <p class="text-slate-300">${msg}</p>
                    </div>
                    <div class="bg-slate-700 rounded-lg p-6 mb-8">
                        <span class="block text-sm text-slate-400 uppercase tracking-wider">Sua Nota</span>
                        <span class="text-5xl font-bold text-${color}-400">${perc}%</span>
                        <p class="text-sm text-slate-400 mt-2">Acertou ${score} de 10 quest√µes</p>
                    </div>
                    <div class="space-y-3">
                        ${passed ? 
                            `<button onclick="navigateTo('certificate')" class="w-full bg-green-600 hover:bg-green-500 text-white font-bold py-3 px-4 rounded-lg shadow-lg flex items-center justify-center gap-2">
                                <i data-lucide="file-text"></i> Emitir Certificado
                             </button>` : 
                            `<button onclick="startQuiz()" class="w-full bg-blue-600 hover:bg-blue-500 text-white font-bold py-3 px-4 rounded-lg shadow-lg flex items-center justify-center gap-2">
                                <i data-lucide="refresh-ccw"></i> Tentar Novamente
                             </button>`
                        }
                        <button onclick="navigateTo('dashboard')" class="w-full bg-transparent border border-slate-600 hover:bg-slate-700 text-slate-300 font-medium py-3 px-4 rounded-lg">Voltar ao Menu</button>
                    </div>
                </div>
            </div>`;
        }

        // View: Certificate
        function renderCertificate() {
            const today = new Date().toLocaleDateString('pt-BR');
            const certId = Math.random().toString(36).substr(2, 9).toUpperCase();

            return `
            <div id="screen-certificate" class="min-h-screen bg-slate-200 flex flex-col items-center justify-center p-4 text-slate-900">
                <div class="mb-6 flex gap-4 no-print">
                    <button onclick="window.print()" class="bg-blue-600 hover:bg-blue-700 text-white font-bold py-2 px-6 rounded-lg shadow flex items-center gap-2">
                        <i data-lucide="printer"></i> Imprimir / Salvar PDF
                    </button>
                    <button onclick="navigateTo('dashboard')" class="bg-slate-600 hover:bg-slate-700 text-white font-bold py-2 px-6 rounded-lg shadow">Voltar</button>
                </div>

                <div class="bg-white text-black p-12 w-full max-w-5xl shadow-2xl border-[20px] border-double border-slate-800 relative mx-auto" style="min-height: 700px;">
                    <div class="absolute inset-0 flex items-center justify-center opacity-5 pointer-events-none">
                        <i data-lucide="shield" width="400" height="400"></i>
                        <img src="./logosemfundo.png" class="mx-auto mb-4" style="width:200px; height:auto;">
                    </div>
                    <div class="h-full flex flex-col items-center justify-between py-10 relative z-10 text-center">
                        <div class="w-full border-b-2 border-slate-300 pb-8 mb-8">
                            <div class="flex justify-center items-center gap-4 text-slate-800 mb-2">
                                <img src="./logosemfundo.png" class="mx-auto mb-4" style="width:200px; height:auto;">
                                <i data-lucide="shield" width="48" height="48"></i>
                                <h1 class="text-4xl font-serif font-bold tracking-wider">CERTIFICADO DE CONCLUS√ÉO</h1>
                            </div>
                            <p class="text-slate-500 uppercase tracking-widest text-sm">Cyber School Prime / PROZ - Treinamento de Seguran√ßa</p>
                        </div>
                        <div class="flex-1 flex flex-col justify-center my-12">
                            <p class="text-xl text-slate-600 mb-6 italic">Certificamos que</p>
                            <h2 class="text-5xl font-bold text-slate-900 mb-8 font-serif capitalize border-b border-dashed border-slate-300 inline-block mx-auto pb-2 px-8 min-w-[50%]">
                                ${AppState.user.name}
                            </h2>
                            <p class="text-xl text-slate-700 max-w-3xl mx-auto leading-relaxed">
                                Concluiu com √™xito o treinamento de <strong>Conscientiza√ß√£o em Seguran√ßa da Informa√ß√£o</strong>, demonstrando profici√™ncia em Pol√≠ticas de Seguran√ßa, LGPD, Preven√ß√£o a Phishing e Conting√™ncia.
                            </p>
                        </div>
                        <div class="w-full grid grid-cols-2 mt-16 px-12">
                            <div class="text-center">
                                <p class="text-lg font-bold text-slate-800">${today}</p>
                                <div class="w-40 h-px bg-slate-400 mx-auto mt-2"></div>
                                <p class="text-sm text-slate-500 mt-1">Data de Emiss√£o</p>
                            </div>
                            <div class="text-center">
                                <div class="h-8 mb-2 flex items-end justify-center">
                                    <div class="h-8 mb-2 flex items-end justify-center">
                                        <span class="italic font-serif text-sm">WAGNER TIRONI</span>
                                    </div>

                                </div>
                                <div class="w-64 h-px bg-slate-400 mx-auto mt-2"></div>
                                <p class="text-sm text-slate-500 mt-1">Respons√°vel pelo Treinamento</p>
                            </div>
                        </div>
                        <div class="mt-12 text-xs text-slate-400 font-mono">
                            Certificado ID: ${certId} | Verific√°vel em CyberSchoolPrime.sistema.com
                        </div>
                        <div class="mt-12 text-xs text-slate-400 font-mono">
                            Trabalho de Conclus√£o Final - Proz - Segura√ßa da Informa√ß√£o
                        </div>
                    </div>
                </div>
            </div>`;
        }

        // --- RENDERIZADOR PRINCIPAL ---
        function render() {
            const app = document.getElementById('app');
            let html = '';

            switch (AppState.screen) {
                case 'bemvindo': html = renderWelcome(); break;
                case 'dashboard': html = renderDashboard(); break;
                case 'module1': html = renderModule('m1', 'M√≥dulo 1: A Muralha Digital', 'lock', 'purple', module1Content); break;
                case 'module2': html = renderModule('m2', 'M√≥dulo 2: O Guardi√£o de Dados', 'file-text', 'orange', module2Content); break;
                case 'module3': html = renderModule('m3', 'M√≥dulo 3: O Protocolo F√™nix', 'server', 'blue', module3Content); break;
                case 'quiz': html = renderQuiz(); break;
                case 'result': html = renderResult(); break;
                case 'certificate': html = renderCertificate(); break;
            }

            app.innerHTML = html;
            lucide.createIcons(); // Atualiza √≠cones ap√≥s renderizar
        }

        // In√≠cio
        render();

    </script>
</body>
</html>